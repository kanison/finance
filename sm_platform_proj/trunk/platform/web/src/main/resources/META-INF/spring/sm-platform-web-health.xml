<?xml version="1.0" encoding="GBK"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:osgi="http://www.springframework.org/schema/osgi"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/osgi http://www.springframework.org/schema/osgi/spring-osgi.xsd"
	default-autowire="byName">
	
	<!-- HearBeat Test -->
	<bean id="heartBeat" name="/health/heartbeat" class="com.tenpay.sm.web.health.HeartBeat">
		<property name="healthItems">
			<map>
				<entry key="threadHealth">
					<bean class="com.tenpay.sm.lang.health.vm.ThreadHealth"></bean>
				</entry>
				<entry key="cpuHealth">
					<bean class="com.tenpay.sm.lang.health.vm.CpuHealth"></bean>
				</entry>
				<entry key="classLoaderHealth">
					<bean class="com.tenpay.sm.lang.health.vm.ClassLoaderHealth"></bean>
				</entry>
				<entry key="applicationContextHealth">
					<bean class="com.tenpay.sm.lang.health.spring.ApplicationContextHealth"></bean>
				</entry>
				<entry key="dataSourceHealth">
					<bean class="com.tenpay.sm.lang.health.spring.DataSourceHealth"></bean>
				</entry>	
				<entry key="messageListenerContainerHealth">
					<bean class="com.tenpay.sm.lang.health.spring.MessageListenerContainerHealth"></bean>
				</entry>	
				<entry key="quartzHealth">
					<bean class="com.tenpay.sm.lang.health.spring.QuartzHealth"></bean>
				</entry>	
				<entry key="threadPoolTaskHealth">
					<bean class="com.tenpay.sm.lang.health.spring.ThreadPoolTaskHealth"></bean>
				</entry>	
				<entry key="XFireClientHealth">
					<bean class="com.tenpay.sm.lang.health.spring.XFireClientHealth"></bean>
				</entry>									
			</map>
		</property>
	</bean>
	
	<!-- Extension的配置形式也可以，这种形式适合各个业务来扩展健康检查 -->
	<bean class="com.tenpay.sm.lang.extend.ValueExtension">
		<property name="extensionPointBean"><ref bean="heartBeat"/></property>
		<property name="extensionPointProperty"><value>healthItems</value></property>
		<property name="extensionKey"><value>memoryHealth</value></property>
		<property name="extensionValue">
			<bean class="com.tenpay.sm.lang.health.vm.MemoryHealth"></bean>
		</property>
	</bean>
	<!-- end -->
	

</beans>
